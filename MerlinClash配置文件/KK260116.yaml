# =======================================
# Magic catlingæ‡’äººé…ç½®
# sev7enåˆ†äº«æ²¹ç®¡é¢‘é“ï¼šhttps://www.youtube.com/@sev7enshare/videos
# sev7enç”µæŠ¥è®¨è®ºç¾¤ç»„ï¼šhttps://t.me/Sev7enshare
# æ¨èæœºåœºè¿·è·¯æŒ‡å—ï¼šhttps://get.imfaner.com
# =======================================

dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  listen: :7874 #MCå¦‚éœ€ä½¿ç”¨ï¼Œ7874æ”¹æˆ23453ï¼Œå†å¤åˆ¶ç²˜è´´åˆ°MCçš„DNSç¼–è¾‘é‡Œ
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: rule
  respect-rules: false
  prefer-h3: false
  fake-ip-filter:
    # å»å¹¿å‘Š
    - RULE-SET,category-ads-all,real-ip
    # Bilibili
    - RULE-SET,bilibili,real-ip
    # Apple
    - RULE-SET,apple@cn,real-ip
    - RULE-SET,apple,real-ip
    # TikTok
    - RULE-SET,tiktok,fake-ip
    # Emby
    - RULE-SET,emby,fake-ip
    # Netflix
    - RULE-SET,netflix,fake-ip
    # Disney
    - RULE-SET,disney,fake-ip
    # Spotify
    - RULE-SET,spotify,fake-ip
    # Speedtest
    - RULE-SET,speedtest,fake-ip
    # GitHub
    - RULE-SET,github,fake-ip
    # Telegram
    - RULE-SET,telegram,fake-ip
    # YouTube
    - RULE-SET,youtube,fake-ip
    # Google
    - RULE-SET,google,fake-ip
    # Twitter
    - RULE-SET,twitter,fake-ip
    # Instagram
    - RULE-SET,instagram,fake-ip
    # Facebook
    - RULE-SET,facebook,fake-ip
    # Steam
    - RULE-SET,steam@cn,real-ip
    - RULE-SET,steam,fake-ip
    # Microsoft
    - RULE-SET,microsoft@cn,real-ip
    - RULE-SET,microsoft,fake-ip
    # Xbox
    - RULE-SET,xbox,fake-ip
    # PlayStation
    - RULE-SET,playstation,fake-ip
    # Nintendo
    - RULE-SET,nintendo@cn,real-ip
    - RULE-SET,nintendo,fake-ip
    # Porn
    - RULE-SET,category-porn,fake-ip
    # AI
    - RULE-SET,category-ai-!cn,fake-ip
    # å›½å¤–ç½‘ç«™
    - RULE-SET,geolocation-!cn,fake-ip
    # å›½å†…ç½‘ç«™
    - RULE-SET,cn,real-ip
    # ğŸŸ æ¼ç½‘ä¹‹é±¼
    - MATCH,fake-ip
  nameserver:
    - 223.6.6.6
    - 223.5.5.5 
    - 119.29.29.29

port: 7890
proxies:

# æœºåœºé…ç½®æ¨¡å—
provider_config: &provider_config {"type": "http","interval": 86400,"user-agent": "clash","health-check": {"enable": true,"url": "http://www.apple.com/library/test/success.html","interval": 300}}

proxy-providers:
  # ç¬¬ä¸€ä¸ªæœºåœº
  AP1:
    url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #ä¿®æ”¹ä½ çš„æœºåœº1è®¢é˜…åœ°å€
    <<: *provider_config
    override:
      additional-prefix: "[AP1]"
  # ç¬¬äºŒä¸ªæœºåœº
  AP2:
    url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #ä¿®æ”¹ä½ çš„æœºåœº2è®¢é˜…åœ°å€
    <<: *provider_config
    override:
      additional-prefix: "[AP2]"
  # ç¬¬ä¸‰ä¸ªæœºåœº
  AP3:
    url: https://XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX #ä¿®æ”¹ä½ çš„æœºåœº3è®¢é˜…åœ°å€
    <<: *provider_config
    override:
      additional-prefix: "[AP3]"
      

# åˆ†ç»„é…ç½®æ¨¡å—
standard_proxies: &standard_proxies {"type": "select", "proxies": ["ğŸ”ƒ è‡ªåŠ¨é€‰æ‹©", "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹", "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹", "ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹", "ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹", "ğŸŒ å…¶ä»–èŠ‚ç‚¹", "DIRECT"], "include-all": true}

# èŠ‚ç‚¹é…ç½®æ¨¡å—
filter_proxies: &filter_proxies {"type": "url-test", "url": "http://www.apple.com/library/test/success.html", "interval": 300, "tolerance": 100, "include-all": true}

proxy-groups:
  - name: AI
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/ChatGPT.png"
    <<: *standard_proxies

  - name: YouTube
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png"
    <<: *standard_proxies  
      
  - name: Emby
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Emby.png"
    <<: *standard_proxies

  - name: TikTok
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TikTok.png"
    <<: *standard_proxies
    
  - name: Bilibili
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png"
    <<: *standard_proxies
      
  - name: Netflix
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Netflix.png"
    <<: *standard_proxies

  - name: Disney
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Disney.png"
    <<: *standard_proxies

  - name: Telegram
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png"
    <<: *standard_proxies
      
  - name: Twitter
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png"
    <<: *standard_proxies

  - name: Instagram
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Instagram.png"
    <<: *standard_proxies

  - name: Facebook
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Facebook.png"
    <<: *standard_proxies

  - name: Spotify
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png"
    <<: *standard_proxies

  - name: Speedtest
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Speedtest.png"
    <<: *standard_proxies

  - name: GitHub
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/GitHub.png"
    <<: *standard_proxies

  - name: Google
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png"
    <<: *standard_proxies

  - name: Apple
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png"
    <<: *standard_proxies

  - name: Microsoft
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png"
    <<: *standard_proxies

  - name: Steam
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Steam.png"
    <<: *standard_proxies

  - name: Xbox
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Xbox.png"
    <<: *standard_proxies

  - name: PlayStation
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PlayStation_1.png"
    <<: *standard_proxies

  - name: Nintendo
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Nintendo.png"
    <<: *standard_proxies

  - name: Porn
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Pornhub_1.png"
    <<: *standard_proxies
    
  - name: å›½å¤–ç½‘ç«™
    icon: "https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png"
    <<: *standard_proxies

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    <<: *standard_proxies

  - name: ğŸ”ƒ è‡ªåŠ¨é€‰æ‹©
    <<: *filter_proxies
    
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?=.*((?i)ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|(\b(US|United States)\b))).*$'

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?=.*((?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|(\b(HK|Hong)\b))).*$'

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|Japan)\b))).*$'

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?=.*((?i)ğŸ‡¨ğŸ‡³|ğŸ‡¹ğŸ‡¼|TW|å°æ¹¾)).*$'

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|Singapore)\b))).*$'
      
  - name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|é¦–å°”|(\b(KR|Korea)\b))).*$'

  - name: ğŸŒ å…¶ä»–èŠ‚ç‚¹
    <<: *filter_proxies
    filter: '^(?!.*(ğŸ‡ºğŸ‡¸|ç¾å›½|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States|ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK|Hong|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|JP|Japan|ğŸ‡¨ğŸ‡³|å°æ¹¾|ğŸ‡¹ğŸ‡¼|TW|ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|SG|Singapore|ğŸ‡°ğŸ‡·|éŸ©å›½|é¦–å°”|KR|Korea)).*$'

# ruleSeté…ç½®æ¨¡å—
rule-anchor:
  ip: &ip {type: http, interval: 43200, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 43200, behavior: domain, format: mrs}
rule-providers:
  bilibili:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs

  cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs

  tiktok:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs

  emby:
    <<: *domain
    url: https://github.com/666OS/rules/raw/release/mihomo/domain/Emby.mrs
  
  netflix:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs
  
  disney:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/disney.mrs

  spotify:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs

  speedtest:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/speedtest.mrs
  
  github:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs

  telegram:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs

  youtube:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs

  google:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs

  twitter:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs

  instagram:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/instagram.mrs

  facebook:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/facebook.mrs

  steam@cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam@cn.mrs

  steam:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam.mrs

  apple@cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple@cn.mrs

  apple:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple.mrs

  microsoft@cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft@cn.mrs

  microsoft:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs

  xbox:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/xbox.mrs

  playstation:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/playstation.mrs

  nintendo@cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/nintendo@cn.mrs

  nintendo:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/nintendo.mrs

  category-porn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-porn.mrs

  category-ai-!cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs

  geolocation-!cn:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs
    
  category-ads-all:
    <<: *domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ads-all.mrs

  private_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/private.mrs

  apple_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/apple.mrs

  google_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/google.mrs

  telegram_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/telegram.mrs

  netflix_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/netflix.mrs

  twitter_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/twitter.mrs

  emby_ip:
    <<: *ip
    url: https://github.com/666OS/rules/raw/release/mihomo/ip/Emby.mrs

  cn_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo-lite/geoip/cn.mrs
  
  ad_ip:
    <<: *ip
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/ad.mrs

rules:
  # å»å¹¿å‘Š
  - RULE-SET,category-ads-all,REJECT
  - RULE-SET,ad_ip,REJECT,no-resolve
  # Bilibili
  - RULE-SET,bilibili,Bilibili
  # Apple
  - RULE-SET,apple@cn,DIRECT
  - RULE-SET,apple,Apple
  # TikTok
  - RULE-SET,tiktok,TikTok
  # Emby
  - RULE-SET,emby,Emby
  # Netflix
  - RULE-SET,netflix,Netflix
  # Disney
  - RULE-SET,disney,Disney
  # Spotify
  - RULE-SET,spotify,Spotify
  # Speedtest
  - RULE-SET,speedtest,Speedtest
  # GitHub
  - RULE-SET,github,GitHub
  # Telegram
  - RULE-SET,telegram,Telegram
  # YouTube
  - RULE-SET,youtube,YouTube
  # Google
  - RULE-SET,google,Google
  # Twitter
  - RULE-SET,twitter,Twitter
  # Instagram
  - RULE-SET,instagram,Instagram
  # Facebook
  - RULE-SET,facebook,Facebook
  # Steam
  - RULE-SET,steam@cn,DIRECT
  - RULE-SET,steam,Steam
  # Microsoft
  - RULE-SET,microsoft@cn,DIRECT
  - RULE-SET,microsoft,Microsoft
  # Xbox
  - RULE-SET,xbox,Xbox
  # PlayStation
  - RULE-SET,playstation,PlayStation
  # Nintendo
  - RULE-SET,nintendo@cn,DIRECT
  - RULE-SET,nintendo,Nintendo
  # Porn
  - RULE-SET,category-porn,Porn
  # AI
  - RULE-SET,category-ai-!cn,AI
  # å›½å¤–ç½‘ç«™
  - RULE-SET,geolocation-!cn,å›½å¤–ç½‘ç«™
  # å›½å†…ç½‘ç«™
  - RULE-SET,cn,DIRECT
  # private_ip
  - RULE-SET,private_ip,DIRECT,no-resolve
  # apple_ip
  - RULE-SET,apple_ip,Apple,no-resolve
  # google_ip
  - RULE-SET,google_ip,Google,no-resolve
  # telegram_ip
  - RULE-SET,telegram_ip,Telegram,no-resolve
  # netflix_ip
  - RULE-SET,netflix_ip,Netflix,no-resolve
  # twitter_ip
  - RULE-SET,twitter_ip,Twitter,no-resolve
  # emby_ip
  - RULE-SET,emby_ip,Emby,no-resolve
  # cn_ip
  - RULE-SET,cn_ip,DIRECT
  # ğŸŸ æ¼ç½‘ä¹‹é±¼
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼



  #changelog
  ##251104 ä¿®æ”¹èŠ‚ç‚¹æ£€æµ‹åœ°å€
  ##251106 RULE-SET,cn_ipä»ä¸è§£æåŸŸåæ”¹ä¸ºè§£æ
  ##251216 æ”¹å›¾æ ‡
  ##251220 ä¿®æ”¹æµ‹é€Ÿåœ°å€
  ##260105 åŠ RHé…ç½®
  ##260111 åŠ RHé…ç½®proxy-server-nameserver
  ##260116 DNSæ”¹ä¸ºruleæ¨¡å¼ï¼Œé€‚é…v1.19.19+ç‰ˆæœ¬
